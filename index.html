<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Task App</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide-react/dist/umd/lucide-react.min.js"></script>
  <style>
    body { background: #f9fafb; font-family: sans-serif; }
    .task-card { background: white; border-radius: 0.5rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .task-card-completed { opacity: 0.7; }
    .priority-dot-low { width: 8px; height: 8px; border-radius: 50%; background: green; }
    .priority-dot-medium { width: 8px; height: 8px; border-radius: 50%; background: orange; }
    .priority-dot-high { width: 8px; height: 8px; border-radius: 50%; background: red; }
  </style>
</head>
<body class="p-6">
  <h1 class="text-2xl font-bold mb-4">My Task App</h1>
  <div id="root"></div>

  <script type="text/babel">

    const { useState } = React;

    function Task() {
      const [task, setTask] = useState({
        id: Date.now().toString(),
        title: "My First Task",
        completed: false,
        priority: "medium",
        subtasks: [],
        page: "inbox"
      });

      const [isEditing, setIsEditing] = useState(false);
      const [editTitle, setEditTitle] = useState(task.title);

      const handleToggleComplete = () => {
        setTask({ ...task, completed: !task.completed });
      };

      const handleStartEdit = () => {
        setIsEditing(true);
        setEditTitle(task.title);
      };

      const handleSaveEdit = () => {
        setTask({ ...task, title: editTitle.trim() || task.title });
        setIsEditing(false);
      };

      const handleMovePage = (page) => {
        setTask({ ...task, page });
      };

      return (
        <div className={`task-card p-4 mb-3 ${task.completed ? "task-card-completed" : ""}`}>
          <div className="flex items-start gap-3">
            <input
              type="checkbox"
              checked={task.completed}
              onChange={handleToggleComplete}
              className="mt-1"
            />

            <div className="flex-1 min-w-0">
              {isEditing ? (
                <div className="flex gap-2">
                  <input
                    value={editTitle}
                    onChange={(e) => setEditTitle(e.target.value)}
                    onKeyDown={(e) => {
                      if (e.key === "Enter") handleSaveEdit();
                    }}
                    className="border rounded px-2 py-1 flex-1"
                  />
                  <button onClick={handleSaveEdit} className="px-3 py-1 bg-blue-500 text-white rounded">
                    Save
                  </button>
                </div>
              ) : (
                <div className="flex items-center gap-2">
                  <div className={
                    task.priority === "high" ? "priority-dot-high" :
                    task.priority === "medium" ? "priority-dot-medium" :
                    "priority-dot-low"
                  } />
                  <h3 className={`font-medium ${task.completed ? "line-through opacity-60" : ""}`}>
                    {task.title}
                  </h3>
                  <span className="ml-2 text-xs bg-gray-200 px-2 py-0.5 rounded">{task.page}</span>
                </div>
              )}
            </div>

            <div className="flex items-center gap-2">
              <button onClick={handleStartEdit} className="text-blue-500">‚úèÔ∏è</button>
              <select
                value={task.page}
                onChange={(e) => handleMovePage(e.target.value)}
                className="border rounded px-2 py-1 text-sm"
              >
                <option value="inbox">Inbox</option>
                <option value="work">Work</option>
                <option value="personal">Personal</option>
                <option value="archive">Archive</option>
              </select>
              <button onClick={() => alert("Delete logic here")} className="text-red-500">üóëÔ∏è</button>
            </div>
          </div>
        </div>
      );
    }

    function App() {
      return (
        <div>
          <Task />
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);

  </script>
</body>
</html>
